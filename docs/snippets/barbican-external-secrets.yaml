apiVersion: external-secrets.io/v1
kind: ExternalSecret
metadata:
  name: barbican-external-secret
spec:
  secretStoreRef:
    name: barbican-backend
    kind: SecretStore

  target:
    name: barbican-result-secret-test

  data:
    - secretKey: test01
      remoteRef:
        key: 35654cca-3cb0-44ee-b773-5e3ad5e27f59

    - secretKey: test02
      remoteRef:
        key: f12dd948-ae0d-4732-a7a4-c2abeecf7e92
        property: key-from-payload
---
apiVersion: external-secrets.io/v1
kind: ExternalSecret
metadata:
  name: barbican-external-secret-from
spec:
  secretStoreRef:
    name: barbican-backend
    kind: SecretStore

  target:
    name: barbican-result-test-from

  dataFrom:
    - find:
        name:
          regexp: "testnow"

    - extract:
        key: f12dd948-ae0d-4732-a7a4-c2abeecf7e92
